FROM oven/bun:latest

WORKDIR /web
ARG NEXT_PUBLIC_APP_API_URL
ARG NEXT_PUBLIC_APP_API_KEY
ARG NEXT_PUBLIC_LIGHTHOUSE_API_KEY

ENV NEXT_PUBLIC_APP_API_URL=$NEXT_PUBLIC_APP_API_URL
ENV NEXT_PUBLIC_APP_API_KEY=$NEXT_PUBLIC_APP_API_KEY
ENV NEXT_PUBLIC_LIGHTHOUSE_API_KEY=$NEXT_PUBLIC_LIGHTHOUSE_API_KEY

COPY package.json ./

RUN bun install

COPY . ./

RUN bun run build

EXPOSE 3000

CMD ["bun", "run", "start"]